<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第二章:用基本组件搭建Three.js场景(part 1) | 孙琦在学可视化</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="概述
在上一章中我们了解了Three.js库的基本知识，在本章中我们会稍微深入一下，详解组成场景的基础组件。本章主要内容如下

搭建Three.js场景用到了哪些组件（components）
我们能用THREE.Scene()对象做什么
几何体（geometries）和网格（meshes）是怎样相关联的
正交摄像机（orthographic camera）和透视投影摄像机（perspective">
<meta property="og:type" content="article">
<meta property="og:title" content="第二章:用基本组件搭建Three.js场景(part 1)">
<meta property="og:url" content="http://vfind.xyz/2015/02/05/c2/">
<meta property="og:site_name" content="孙琦在学可视化">
<meta property="og:description" content="概述
在上一章中我们了解了Three.js库的基本知识，在本章中我们会稍微深入一下，详解组成场景的基础组件。本章主要内容如下

搭建Three.js场景用到了哪些组件（components）
我们能用THREE.Scene()对象做什么
几何体（geometries）和网格（meshes）是怎样相关联的
正交摄像机（orthographic camera）和透视投影摄像机（perspective">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/b29e5633tw1eoy5hf6tp1j20r20hydhh.jpg">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/b29e5633tw1eoyc0lk1g0j20k60dk0vg.jpg">
<meta property="og:image" content="http://ww4.sinaimg.cn/large/b29e5633tw1eoybzuer52j20m00em7bg.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/b29e5633tw1eoyav44m82j20pe0h2ju0.jpg">
<meta property="og:image" content="http://ww4.sinaimg.cn/large/b29e5633tw1eoyb8lfkx8j20po0hcq5h.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第二章:用基本组件搭建Three.js场景(part 1)">
<meta name="twitter:description" content="概述
在上一章中我们了解了Three.js库的基本知识，在本章中我们会稍微深入一下，详解组成场景的基础组件。本章主要内容如下

搭建Three.js场景用到了哪些组件（components）
我们能用THREE.Scene()对象做什么
几何体（geometries）和网格（meshes）是怎样相关联的
正交摄像机（orthographic camera）和透视投影摄像机（perspective">

  
  
    <link rel="icon" href="/favicon.png">
  

  <link rel="stylesheet" href="/css/style.css" type="text/css">

  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="/" class="logo">
        <span id="logo_v" class="logo_text">V</span>
        <span id="logo_f" class="logo_text">F</span>
        <span id="logo_i" class="logo_text">I</span>
        <span id="logo_n" class="logo_text">N</span>
        <span id="logo_d" class="logo_text">D</span>
    </a>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/categories/Three-js">Threejs</a>
        
          <a class="main-nav-link" href="/categories/可视化">可视化</a>
        
          <a class="main-nav-link" href="/categories/前端">前端</a>
        
          <a class="main-nav-link" href="/categories/杂">杂</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://vfind.xyz"></form>
        </div>
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        
      </nav>
    </div>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/categories/Three-js" class="mobile-nav-link">Threejs</a>
  
    <a href="/categories/可视化" class="mobile-nav-link">可视化</a>
  
    <a href="/categories/前端" class="mobile-nav-link">前端</a>
  
    <a href="/categories/杂" class="mobile-nav-link">杂</a>
  
  <div id="search-form-wrap-mobile">
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://vfind.xyz"></form>
  </div>
</nav>
      <div class="outer">
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Three-js/">Three.js</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/可视化/">可视化</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂/">杂</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Three-js/">Three.js</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/教程/">教程</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Three-js/" style="font-size: 20.00px;">Three.js</a><a href="/tags/js/" style="font-size: 10.00px;">js</a><a href="/tags/教程/" style="font-size: 10.00px;">教程</a>
    </div>
  </div>

  
</aside>
        
        <section id="main"><article id="post-c2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/02/05/c2/" class="article-date">
  <time datetime="2015-02-05T03:42:16.000Z" itemprop="datePublished">Feb 5 2015</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Three-js/">Three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      第二章:用基本组件搭建Three.js场景(part 1)
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="概述">概述</h3>
<p>在上一章中我们了解了Three.js库的基本知识，在本章中我们会稍微深入一下，详解组成场景的基础组件。本章主要内容如下</p>
<ul>
<li>搭建Three.js场景用到了哪些组件（components）</li>
<li>我们能用THREE.Scene()对象做什么</li>
<li>几何体（geometries）和网格（meshes）是怎样相关联的</li>
<li>正交摄像机（orthographic camera）和透视投影摄像机（perspective camera）的区别是什么</li>
</ul>
<a id="more"></a>
<h3 id="创建一个scene">创建一个scene</h3>
<p>在上一章中我们已经创建了一个THREE.Scene()对象，所以你应该已经知道了Three.js的基础知识。要在场景中显示什么东西，有三种组件是必不可少的：</p>
<ul>
<li>camera （摄像机）：它决定了有哪些东西会被渲染</li>
<li>lights（灯光）：能影响材质的显示效果，也能用来创建阴影效果</li>
<li>objects（物体）：这是会被渲染到屏幕上的主要的部分，像立方体、球体等等</li>
</ul>
<p>看起来THREE.Scene()对象就像这些东西的容器，它本身没有什么功能和配置</p>
<p>真的是这样吗？</p>
<h3 id="场景的基础功能">场景的基础功能</h3>
<p>我们来通过例子来探索场景的功能。在第二章的源码中你能找到01-basic-scene.html</p>
<p>我们将用这个例子来解释场景的很多功能和设置。当我们打开这个例子的时候，我们看到的会是这样的</p>
<p><img src="http://ww2.sinaimg.cn/large/b29e5633tw1eoy5hf6tp1j20r20hydhh.jpg" alt=""></p>
<p>这看起来和上一章的东西很相似，虽然这个场景目前空空如也，但它已经包含了很多东西。通过看它的源码，我们能看到已经用<code>Scene.add(object)</code>函数添加了一个<code>THREE.Mesh</code>（就是你看到的这个平面），一个<code>THREE.SpotLight</code>点光源和<code>THREE.AmbientLight</code>环境光。</p>
<p><code>THREE.Camera</code>摄像机对象在你渲染场景的时候被Three.js库自动添加上了。但是你也可以手动添加。</p>
<figure class="highlight [javascript]"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var scene = new THREE.Scene();</div><div class="line">var camera = new THREE.PerspectiveCamera(<span class="number">45</span>,</div><div class="line">window.innerWidth / window.innerHeight, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">...</span></div><div class="line">var planeGeometry = new THREE.PlaneGeometry(<span class="number">60</span>,<span class="number">40</span>,<span class="number">1</span>,<span class="number">1</span>);</div><div class="line">var planeMaterial = new THREE.MeshLambertMaterial({color: <span class="number">0xffffff</span>}); var plane = new THREE.Mesh(planeGeometry,planeMaterial);</div><div class="line"><span class="keyword">...</span></div><div class="line">scene.add(plane);</div><div class="line">var ambientLight = new THREE.AmbientLight(<span class="number">0x0c0c0c</span>); scene.add(ambientLight);</div><div class="line"><span class="keyword">...</span></div><div class="line">var spotLight = new THREE.SpotLight( <span class="number">0xffffff</span> );</div><div class="line"><span class="keyword">...</span></div><div class="line">scene.add( spotLight );</div></pre></td></tr></table></figure>

<p>在我们深入探索场景对象之前，我要先解释下在这个例子中你能做什么。在浏览器中打开示例，你会在右上角有控制菜单。</p>
<p><img src="http://ww2.sinaimg.cn/large/b29e5633tw1eoyc0lk1g0j20k60dk0vg.jpg" alt=""></p>
<p>你能通过它添加一个立方体到场景中，或者删除刚加上的立方体，显示场景中当前的物体数量。有件事你可能已经注意到了，你就是刚打开的时候尽管没有立方体，还是显示在场景有四个物体，它们是：</p>
<ul>
<li>平面（ground plane）</li>
<li>环境光源(ambient light)</li>
<li>点光源(spot light)</li>
<li>摄像机(camera)</li>
</ul>
<p>接下来的代码，我们先来看看控制部分的各个函数，当然了，从最简单的<code>sddCube()</code>开始</p>
<figure class="highlight [javascript]"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">this</span>.addCube = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">     <span class="keyword">var</span> cubeSize = <span class="built_in">Math</span>.ceil((<span class="built_in">Math</span>.random() * <span class="number">3</span>));</div><div class="line">     <span class="keyword">var</span> cubeGeometry = <span class="keyword">new</span></div><div class="line">           THREE.CubeGeometry(cubeSize,cubeSize,cubeSize);</div><div class="line">     <span class="keyword">var</span> cubeMaterial = <span class="keyword">new</span> THREE.MeshLambertMaterial(</div><div class="line">{color: <span class="built_in">Math</span>.random() * <span class="number">0xffffff</span> });</div><div class="line"><span class="keyword">var</span> cube = <span class="keyword">new</span> THREE.Mesh(cubeGeometry, cubeMaterial); cube.castShadow = <span class="literal">true</span>;</div><div class="line">cube.name = <span class="string">"cube-"</span> + scene.children.length; cube.position.x=-<span class="number">30</span> + <span class="built_in">Math</span>.round(</div><div class="line">                (<span class="built_in">Math</span>.random() * planeGeometry.width));</div><div class="line">     cube.position.y= <span class="built_in">Math</span>.round((<span class="built_in">Math</span>.random() * <span class="number">5</span>));</div><div class="line">     cube.position.z=-<span class="number">20</span> + <span class="built_in">Math</span>.round((<span class="built_in">Math</span>.random() *</div><div class="line">                 planeGeometry.height));</div><div class="line">     scene.add(cube);</div><div class="line">     <span class="keyword">this</span>.numberOfObjects = scene.children.length;</div><div class="line">};</div></pre></td></tr></table></figure>

<p>代码的意思一目了然，没有很多新的方面需要介绍。当你点击<code>sddCube</code>按钮，一个新的<code>THREE.CubeGeometry</code>实例会被创建，而且他的长宽高都是0-3之间的随机数。颜色和位置也都是随机产生的。<br>这段代码中的新内容是我们给每个立方体通过<code>name</code>属性赋予了一个名字，格式类似于cube-1，cube-2</p>
<p>在查错和调试的时候名字能起到很大帮助，也能通过<code>Scene.getChildByName(name)</code>函数来选择场景中特定的个体，然后直接修改这个个体的属性。<br>你可能会问，最后一行代码是做什么呢？事实上<code>numberOfObjects</code>变量是我们的GUI控制器显示场景中物体/对象（objects）数量时用的。所以无论何时添加一个物体或者删除一个，这个数目都会及时得到更新。</p>
<p>控制菜单调用的下一个函数是<code>removeCube</code>，它能从场景上移除刚刚添加的立方体。</p>
<figure class="highlight [javascript]"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.removeCube = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">       <span class="keyword">var</span> allChildren = scene.children;</div><div class="line">       <span class="keyword">var</span> lastObject = allChildren[allChildren.length-<span class="number">1</span>];</div><div class="line">       <span class="keyword">if</span> (lastObject <span class="keyword">instanceof</span> THREE.Mesh) {</div><div class="line">           scene.remove(lastObject);</div><div class="line">           <span class="keyword">this</span>.numberOfObjects = scene.children.length;</div><div class="line">       }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>从场景中移除物体/对象用到的是<code>scene.remove()</code>函数。在上面代码中可以看到，我们先用<code>THREE.Scene</code>的<code>children</code>得到最后添加的对象，还检查了一下这个对象是不是<code>Mesh</code>网格对象。以防移除了摄像机或者光源。每次点击删除，都会更新物体数量。</p>
<p>控制菜单最后一个按钮是<code>outputObjects</code>。你可能已经点击过它但是什么也没有发生。事实上它的作用是将现在场景中所有的物体/对象的信息输出到浏览器的控制台（console）中。就像下图中一样：<br><img src="http://ww4.sinaimg.cn/large/b29e5633tw1eoybzuer52j20m00em7bg.jpg" alt=""><br>输出信息搭配控制台的代码利用了内置<code>console</code>对象：</p>
<figure class="highlight [javascript]"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.outputObjects = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">       <span class="built_in">console</span>.log(scene.children);</div><div class="line">}</div></pre></td></tr></table></figure>

<p>这对调试查错来说非常给力，尤其是当你给每个物体都命名了之后。你能轻松得到特定对象的信息，并且快速发现问题。比如能把cube-17的信息陈列如下</p>
<figure class="highlight [javascript]"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">__webglActive</span>: <span class="string">true</span></div><div class="line"><span class="attribute">__webglInit</span>: <span class="string">true</span></div><div class="line"><span class="attribute">_modelViewMatrix</span>: <span class="string">THREE.Matrix4</span></div><div class="line"><span class="attribute">_normalMatrix</span>: <span class="string">THREE.Matrix3</span></div><div class="line"><span class="attribute">_vector</span>: <span class="string">THREE.Vector3</span></div><div class="line"><span class="attribute">castShadow</span>: <span class="string">true</span></div><div class="line"><span class="attribute">children</span>: <span class="string">Array[0]</span></div><div class="line"><span class="attribute">eulerOrder</span>: <span class="string">"XYZ"</span></div><div class="line"><span class="attribute">frustumCulled</span>: <span class="string">true</span></div><div class="line"><span class="attribute">geometry</span>: <span class="string">THREE.CubeGeometry</span></div><div class="line"><span class="attribute">id</span>: <span class="string">20</span></div><div class="line"><span class="attribute">material</span>: <span class="string">THREE.MeshLambertMaterial</span></div><div class="line"><span class="attribute">matrix</span>: <span class="string">THREE.Matrix4</span></div><div class="line"><span class="attribute">matrixAutoUpdate</span>: <span class="string">true</span></div><div class="line"><span class="attribute">matrixRotationWorld</span>: <span class="string">THREE.Matrix4</span></div><div class="line"><span class="attribute">matrixWorld</span>: <span class="string">THREE.Matrix4</span></div><div class="line"><span class="attribute">matrixWorldNeedsUpdate</span>: <span class="string">false</span></div><div class="line"><span class="attribute">name</span>: <span class="string">"cube-17"</span></div><div class="line"><span class="attribute">parent</span>: <span class="string">THREE.Scene</span></div><div class="line"><span class="attribute">position</span>: <span class="string">THREE.Vector3</span></div><div class="line"><span class="attribute">properties</span>: <span class="string">Object</span></div><div class="line"><span class="attribute">quaternion</span>: <span class="string">THREE.Quaternion</span></div><div class="line"><span class="attribute">receiveShadow</span>: <span class="string">false</span></div><div class="line"><span class="attribute">renderDepth</span>: <span class="string">null</span></div><div class="line"><span class="attribute">rotation</span>: <span class="string">THREE.Vector3</span></div><div class="line"><span class="attribute">rotationAutoUpdate</span>: <span class="string">true</span></div><div class="line"><span class="attribute">scale</span>: <span class="string">THREE.Vector3</span></div><div class="line"><span class="attribute">up</span>: <span class="string">THREE.Vector3</span></div><div class="line"><span class="attribute">useQuaternion</span>: <span class="string">false</span></div><div class="line"><span class="attribute">visible</span>: <span class="string">true</span></div><div class="line"><span class="attribute">__proto__</span>: <span class="string">Object</span></div></pre></td></tr></table></figure>

<p>到此为止，我们已经认识了和场景相关的功能有：</p>
<ul>
<li><code>Scene.add()</code>：向场景添加对象</li>
<li><code>Scene.remove()</code>：移除</li>
<li><code>Scene.children()</code>：获得子对象列表</li>
<li><code>Scene.getChildByName()</code>：通过name获得一个特定的对象</li>
</ul>
<p>这些都是非常重要的函数，经常会被用到。当然另外还有几个出现频率比较低的辅助函数，现在我们就以处理立方体角度的代码为例讲解<br>在上一章中，我们用一个渲染循环来渲染场景，本例中也有同样的代码：</p>
<figure class="highlight [javascript]"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span><span class="params">()</span> </span>{</div><div class="line">     stats.update();</div><div class="line">       scene.traverse(<span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>{</div><div class="line">         <span class="keyword">if</span> (e <span class="keyword">instanceof</span> THREE.Mesh && e != plane ) {</div><div class="line">           e.rotation.x+=controls.rotationSpeed;</div><div class="line">           e.rotation.y+=controls.rotationSpeed;</div><div class="line">           e.rotation.z+=controls.rotationSpeed;</div><div class="line">} });</div><div class="line">requestAnimationFrame(render);</div><div class="line">renderer.render(scene, camera);</div><div class="line">   }</div></pre></td></tr></table></figure>

<p>这里我们用到了<code>THREE.Scene.traverse()</code>函数。我们能传递一个函数作为<code>traverse()</code>的参数，并且传递给traverse的函数能被scene中所有的子对象调用。在<code>render()</code>函数中，我们将使用<code>traverse()</code>函数来更新每个立方体的角度（当然我们会特意不去修改平面（plane）），我们可以使用一个for循环遍历scene子对象的数组做到了这一点</p>
<p>在我们深入学习网格（Mesh）和几何体（Geometry）前，我还要介绍场景（scene）两个有趣的属性：</p>
<ul>
<li>fog</li>
<li>overrideMaterial<br>-<h3 id="给场景添加雾效（fog_effect）">给场景添加雾效（fog effect）</h3>
fog属性能整个场景添加雾效，越远的物体看的越朦胧<br><img src="http://ww1.sinaimg.cn/large/b29e5633tw1eoyav44m82j20pe0h2ju0.jpg" alt=""><br>开启雾效很简单：</li>
</ul>
<figure class="highlight [javascript]"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">scene.fog</span>=<span class="string">new THREE.Fog( 0xffffff, 0.015, 100 );</span></div></pre></td></tr></table></figure>

<p>就这样，我们定义了一个白色的雾（0xffffff），最后两个参数是可用于调整雾的显示方式得远近属性。<code>0.015,100</code>的意义就是在里摄像机距离为0.015时开始产生雾效（小于0.015不会产生），在离摄像机100及大于100的地方将会完全呈现雾效，原有物体都被雾遮掩。<br>还有一个不同的方式来设置的雾效：</p>
<figure class="highlight [javascript]"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">scene.fog</span>=<span class="string">new THREE.FogExp2( 0xffffff, 0.015 );</span></div></pre></td></tr></table></figure>

<p>用这种方法不会有远近属性出现，只需要定义颜色和雾气密度（mist density）。</p>
<h3 id="使用覆盖材质（overrideMaterial）属性">使用覆盖材质（overrideMaterial）属性</h3>
<p>我们介绍的场景（scene）的最后一个属性是<code>overrideMaterial</code>，他能修改所有物体的材质</p>
<figure class="highlight [javascript]"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">scene.overrideMaterial </span>=<span class="string"> new</span></div><div class="line">       THREE.MeshLambertMaterial({color: 0xffffff});</div></pre></td></tr></table></figure>

<p>上面的代码就改变了所有物体的材质，现在整个场景看起来会是这个样子的：<br><img src="http://ww4.sinaimg.cn/large/b29e5633tw1eoyb8lfkx8j20po0hcq5h.jpg" alt=""></p>
<p>我们给所有的物体使用了MeshLambertMaterial材质。用这种材质，您可以创建能对光照效果做出反应但是不会闪亮的表现效果。在第4章，你会学到更多关于这种材料的知识。</p>
<p>在本小节中，我们已经对Three.js的一个核心方面——场景（scene）——有了初步了解。关于场记有一点要牢记，那就是它是所有物体、光源、摄像机的容器。<br>下面是对场景（scene）最重功能和参数的总结：</p>
<ul>
<li><code>add(object)</code>：向场景中添加物体。你还能用这个函数创建物体组（接下来会有讲述）</li>
<li><code>childern</code>：返回所有被添加到场景中物体的列表，包括光源（lights）和摄像机（camera）</li>
<li><code>getChildByName(name)</code>：当你创建一个物体的时候你能通过<code>name</code>属性给它命名。利用场景（scene）的这个函数，能通过name直接获取某个特定对象</li>
<li><code>remove(object)</code>：移除场景中的物体</li>
<li><code>traverse(function)</code>：<code>children</code>参数返回场景所有子元素的列表，我们也能用<code>traverse()</code>函数传递一个回调函数来获取这些子元素。</li>
<li><code>fog</code>：这个属性能给场景添加雾效</li>
<li><code>overrideMaterial</code>：强行给场景中的所有元素使用相同的材质</li>
</ul>
<p>在下一小节中我们的重点是添加到场景中的物体（objects）</p>

      
    </div>
    <footer class="article-footer">

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Three-js/">Three.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/教程/">教程</a></li></ul>

        
          <!-- 多说评论框 start -->
<div class="ds-thread" data-thread-key="2015/02/05/c2/" data-title="第二章:用基本组件搭建Three.js场景(part 1)" data-url="http://vfind.xyz/2015/02/05/c2/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"vfindxyz"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.unstable.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- 多说公共JS代码 end -->
        
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2015/02/04/第一章/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">第一章:用three.js创造你的第一个3D场景</div>
    </a>
  
</nav>

  
</article>



</section>
      </div>
      <footer id="footer">
  



        <div class="sq_footer">

            <div class="sq_weibo_logo">
                <img id="sq_weibo_touxiang" class="sq_footer_animate" src="http://tp4.sinaimg.cn/2996721203/180/5701417451/1">
                <a  href="http://weibo.com/u/2996721203" target="_blank">
                    <svg version="1.1"  class="sq_footer_animate" id="weibo_svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                         viewBox="0 0 96 96" enable-background="new 0 0 96 96" xml:space="preserve">
                    <g>
                        <path d="M54.9,49.2c-1.5-1.4-3.4-2.4-5.7-3c-2.4-0.6-4.9-0.8-7.6-0.6c-4.1,0.4-7.5,1.7-10.2,3.9c-2.7,2.2-3.9,4.6-3.6,7.3
                            c0.2,1.8,1,3.3,2.4,4.7s3.4,2.4,5.7,3s4.9,0.8,7.6,0.6c4.1-0.4,7.5-1.7,10.2-3.9c2.7-2.2,3.9-4.6,3.6-7.3
                            C57.2,52.1,56.4,50.6,54.9,49.2z M48.8,58.3c-0.8,1.9-2.3,3.2-4.3,4.1c-2.1,0.9-4.1,1-6.2,0.3c-2-0.6-3.3-1.8-4.1-3.5
                            c-0.7-1.7-0.7-3.4,0.2-5.2c0.9-1.7,2.3-3,4.2-3.8c1.9-0.8,3.8-1,5.8-0.5c2,0.5,3.5,1.6,4.4,3.3C49.6,54.7,49.6,56.5,48.8,58.3z"/>
                        <path d="M43.6,54.1c-0.3-0.1-0.5-0.1-0.8,0c-0.3,0.1-0.5,0.3-0.6,0.5c-0.3,0.6-0.2,1,0.4,1.2c0.3,0.1,0.5,0.1,0.8,0
                            c0.3-0.1,0.5-0.3,0.6-0.5c0.1-0.2,0.2-0.5,0.1-0.7C44,54.4,43.8,54.2,43.6,54.1z"/>
                        <path d="M40.5,55.4c-0.6-0.3-1.3-0.3-2,0c-0.7,0.2-1.3,0.7-1.7,1.3c-0.4,0.6-0.5,1.3-0.4,1.9c0.2,0.6,0.6,1.1,1.2,1.4
                            s1.3,0.3,2.1,0.1c0.7-0.2,1.3-0.7,1.7-1.3c0.4-0.6,0.5-1.3,0.3-1.9C41.5,56.1,41.1,55.7,40.5,55.4z"/>
                        <path d="M47.8,0.1c-26.5,0-48,21.5-48,48c0,26.5,21.5,48,48,48s48-21.5,48-48C95.8,21.6,74.3,0.1,47.8,0.1z M64.8,57.8
                            c-0.7,1.3-1.7,2.6-3,3.8c-1.3,1.2-2.9,2.3-4.6,3.2c-1.8,1-3.8,1.7-6.2,2.3c-2.4,0.6-4.9,0.9-7.4,0.9c-2.6,0-5.1-0.3-7.6-0.9
                            c-2.5-0.6-4.7-1.5-6.6-2.6c-2-1.1-3.5-2.5-4.7-4.2c-1.2-1.7-1.8-3.5-1.8-5.5c0-2.1,0.6-4.4,1.9-6.7c1.3-2.4,3.1-4.8,5.4-7.1
                            c3.1-3.1,6.2-5.3,9.4-6.5c3.2-1.2,5.4-1.2,6.8,0.2c1.2,1.2,1.4,3.1,0.6,5.8c-0.1,0.3-0.1,0.4,0,0.6c0.1,0.1,0.1,0.2,0.3,0.2
                            c0.1,0,0.3,0,0.4,0c0.1,0,0.3-0.1,0.4-0.1l0.2-0.1c2.6-1.1,4.8-1.6,6.8-1.6c2,0,3.4,0.6,4.2,1.7c0.8,1.2,0.8,2.8,0,4.9
                            c0,0.2-0.1,0.4-0.1,0.6c0,0.1,0,0.2,0.1,0.3c0.1,0.1,0.2,0.2,0.3,0.2c0.1,0,0.2,0.1,0.5,0.2c1,0.3,2,0.8,2.8,1.3
                            c0.8,0.5,1.6,1.3,2.2,2.2c0.6,1,0.9,2,0.9,3.2C65.8,55.2,65.5,56.5,64.8,57.8z M61.4,39c-0.8-0.9-1.8-1.2-2.9-1
                            c-0.4,0.1-0.9,0-1.2-0.2c-0.4-0.2-0.6-0.6-0.7-1c-0.1-0.4,0-0.8,0.2-1.2c0.2-0.4,0.6-0.6,1-0.7c1.1-0.2,2.2-0.2,3.3,0.2
                            c1.1,0.3,2,0.9,2.8,1.8c0.8,0.9,1.3,1.9,1.5,3c0.2,1.1,0.2,2.2-0.2,3.2c-0.1,0.4-0.4,0.7-0.8,0.9c-0.4,0.2-0.8,0.2-1.2,0.1
                            c-0.4-0.1-0.7-0.4-0.9-0.8c-0.2-0.4-0.2-0.8-0.1-1.2C62.4,40.9,62.2,39.9,61.4,39z M71.5,45.1c-0.2,0.5-0.5,0.9-0.9,1.1
                            s-0.9,0.3-1.4,0.1c-0.5-0.2-0.9-0.5-1.1-0.9c-0.2-0.5-0.3-0.9-0.1-1.4c0.5-1.5,0.6-3.1,0.3-4.7c-0.3-1.7-1.1-3.1-2.2-4.3
                            c-1.1-1.3-2.5-2.1-4.1-2.6s-3.2-0.6-4.8-0.2c-0.5,0.1-1,0-1.4-0.3c-0.4-0.3-0.7-0.7-0.8-1.2c-0.1-0.5,0-1,0.3-1.4
                            c0.3-0.4,0.7-0.7,1.2-0.8c2.3-0.5,4.5-0.4,6.7,0.3c2.2,0.7,4.1,1.9,5.7,3.7c1.6,1.8,2.6,3.8,3.1,6.1C72.3,40.8,72.2,43,71.5,45.1z"
                                />
                    </g>
                </svg>

                </a>
                <a  href="https://github.com/sunqibuhuake" target="_blank">
                    <svg version="1.1" class="sq_footer_animate" id="github_svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                         width="96px" height="96px" viewBox="0 0 96 96" style="enable-background:new 0 0 96 96;" xml:space="preserve">
                            <path d="M48.07,47.746c-0.022,0-0.047-0.001-0.07-0.002c-0.024,0.001-0.049,0.002-0.071,0.002c-5.957,0-11.206-1.508-14.308,1.34
                                c-1.859,1.709-2.642,3.768-2.642,5.985c0,9.261,7.42,10.398,16.949,10.398h0.142c9.529,0,16.949-1.138,16.949-10.398
                                c0-2.218-0.783-4.276-2.642-5.985C59.275,46.238,54.027,47.746,48.07,47.746z M39.968,60.401c-1.813,0-3.283-2.036-3.283-4.547
                                s1.47-4.546,3.283-4.546s3.285,2.035,3.285,4.546S41.781,60.401,39.968,60.401z M56.031,60.401c-1.814,0-3.285-2.036-3.285-4.547
                                s1.471-4.546,3.285-4.546c1.812,0,3.283,2.035,3.283,4.546S57.844,60.401,56.031,60.401z M48,0C21.489,0,0,21.49,0,48
                                s21.489,48,48,48c26.509,0,48-21.49,48-48S74.509,0,48,0z M52.378,67.701c-0.86,0-2.57,0.002-4.378,0.004
                                c-1.809-0.002-3.52-0.004-4.379-0.004c-3.803,0-18.863-0.291-18.863-18.445c0-4.177,1.432-7.233,3.775-9.778
                                c-0.374-0.923-0.393-6.165,1.602-11.183c0,0,4.576,0.502,11.5,5.253c1.451-0.401,3.908-0.601,6.365-0.601
                                c2.455,0,4.912,0.199,6.365,0.601c6.923-4.751,11.498-5.253,11.498-5.253c1.995,5.018,1.977,10.26,1.603,11.183
                                c2.344,2.545,3.776,5.602,3.776,9.778C71.242,67.41,56.181,67.701,52.378,67.701z"/>

                        </svg>

                </a>

            </div>


            <div class="sq_copyright" >
                &copy; 2015 孙琦<br>
                Powered by <a href="http://hexo.io/" id="hexo_link" target="_blank">Hexo</a>
            </div>



        </div>





</footer>
    </div>
    

<script src="/js/jquery.min.js" type="text/javascript"></script>


<script src="/extendjs/snabbt.js" type="text/javascript"></script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>

<script src="/js/custom.js" type="text/javascript"></script>

  </div>
</body>
</html>